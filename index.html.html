<!doctype html>
<html lang="ar">
<head>
  <meta charset="utf-8">
  <title>Baghdad CafÃ©</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: 'Arial', sans-serif; background: #f8fafd; margin:0; padding:0; direction: rtl; }
    header { background: linear-gradient(135deg,#00aaff,#0066cc); color: white; padding: 20px; text-align:center; }
    header h1 { margin:0; font-size: 28px; }
    .logo { font-size: 18px; font-weight: bold; }
    .container { padding:20px; max-width:800px; margin:auto; }
    h2 { border-bottom:2px solid #eee; padding-bottom:5px; margin-top:30px; }
    .item { display:flex; justify-content:space-between; align-items:center; padding:10px; border-bottom:1px solid #ddd; }
    .item button { padding:5px 10px; background:#00aaff; color:white; border:none; border-radius:6px; cursor:pointer; }
    .item button:hover { background:#0088cc; }
    #cart { margin-top:30px; padding:15px; background:#eef6fb; border-radius:8px; }
    #placeOrder { margin-top:15px; padding:10px 20px; background:#28a745; color:white; border:none; border-radius:8px; cursor:pointer; font-size:16px; }
    #placeOrder:hover { background:#218838; }
    #result { margin-top:15px; color:green; font-weight:bold; }
    li button { margin: 0 3px; }
  </style>
</head>
<body>
  <header>
    <h1>â˜• Baghdad CafÃ©</h1>
    <div class="logo">Ù…Ø´Ø±ÙˆØ¨Ø§Øª â€¢ Ø³Ù†Ø§ÙƒØ³ â€¢ Ù…Ø«Ù„Ø¬Ø§Øª</div>
  </header>

  <div class="container">
    <h2>Ø§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª</h2>
    <div class="item">
      <span>Ù‚Ù‡ÙˆØ© ØªØ±ÙƒÙŠ</span>
      <span>25 Ø¬Ù†ÙŠÙ‡</span>
      <button onclick="addToCart('Drinks','Ù‚Ù‡ÙˆØ© ØªØ±ÙƒÙŠ',25)">+</button>
    </div>
    <div class="item">
      <span>Ù„Ø§ØªÙŠÙ‡</span>
      <span>35 Ø¬Ù†ÙŠÙ‡</span>
      <button onclick="addToCart('Drinks','Ù„Ø§ØªÙŠÙ‡',35)">+</button>
    </div>

    <h2>Ø³Ù†Ø§ÙƒØ³</h2>
    <div class="item">
      <span>Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´ Ø¬Ø¨Ù†Ø©</span>
      <span>40 Ø¬Ù†ÙŠÙ‡</span>
      <button onclick="addToCart('Snacks','Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´ Ø¬Ø¨Ù†Ø©',40)">+</button>
    </div>
    <div class="item">
      <span>Ø´ÙŠØ¨Ø³ÙŠ</span>
      <span>15 Ø¬Ù†ÙŠÙ‡</span>
      <button onclick="addToCart('Snacks','Ø´ÙŠØ¨Ø³ÙŠ',15)">+</button>
    </div>

    <h2>Ù…Ø«Ù„Ø¬Ø§Øª</h2>
    <div class="item">
      <span>Ø¢ÙŠØ³ ÙƒØ±ÙŠÙ… ÙØ§Ù†ÙŠÙ„ÙŠØ§</span>
      <span>30 Ø¬Ù†ÙŠÙ‡</span>
      <button onclick="addToCart('IceCream','Ø¢ÙŠØ³ ÙƒØ±ÙŠÙ… ÙØ§Ù†ÙŠÙ„ÙŠØ§',30)">+</button>
    </div>
    <div class="item">
      <span>Ø¢ÙŠØ³ ÙƒØ±ÙŠÙ… Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ©</span>
      <span>30 Ø¬Ù†ÙŠÙ‡</span>
      <button onclick="addToCart('IceCream','Ø¢ÙŠØ³ ÙƒØ±ÙŠÙ… Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ©',30)">+</button>
    </div>

    <div id="cart">
      <h3>ğŸ›’ Ø¹Ø±Ø¨Ø© Ø§Ù„Ø·Ù„Ø¨</h3>
      <ul id="cartItems"></ul>
      <p>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span id="total">0</span> Ø¬Ù†ÙŠÙ‡</p>
      <button id="placeOrder" onclick="placeOrder()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
      <div id="result"></div>
    </div>
  </div>

  <script>
    const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzlnyO2HyE_tInU2ZTHT63sN9kvfV-yZQyJ8IAF1QOnd4LflypFPQg7tRWb57nt1EtwjQ/exec"; 

    let cart = [];

    function addToCart(category, item, price) {
      const existing = cart.find(c => c.item === item);
      if (existing) {
        existing.qty += 1;
        existing.total = existing.qty * existing.price;
      } else {
        cart.push({category, item, price, qty:1, total:price});
      }
      renderCart();
    }

    function decreaseQty(item){
      const existing = cart.find(c => c.item === item);
      if(existing){
        existing.qty -= 1;
        if(existing.qty <= 0){
          cart = cart.filter(c => c.item !== item);
        } else {
          existing.total = existing.qty * existing.price;
        }
        renderCart();
      }
    }

    function renderCart(){
      const ul = document.getElementById("cartItems");
      ul.innerHTML = "";
      let total = 0;
      cart.forEach(c=>{
        total += c.total;
        let li = document.createElement("li");
        li.innerHTML = `
          ${c.item} - ${c.price} Ø¬Ù†ÙŠÙ‡ Ã— ${c.qty} = ${c.total} Ø¬Ù†ÙŠÙ‡
          <button onclick="addToCart('${c.category}','${c.item}',${c.price})">+</button>
          <button onclick="decreaseQty('${c.item}')">-</button>
        `;
        ul.appendChild(li);
      });
      document.getElementById("total").textContent = total;
    }

    async function placeOrder(){
      if(cart.length===0){ alert("Ø§Ø®ØªØ± ØµÙ†Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„"); return; }

      try {
        for(const c of cart){
          const data = {
            category: c.category,
            item: c.item,
            qty: c.qty,
            total: c.total
          };
          const res = await fetch(WEB_APP_URL, {
            method: "POST",
            body: JSON.stringify(data)
          });
          const result = await res.json();
          document.getElementById("result").textContent =
            "âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨! Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨: " + result.orderId;
        }
      } catch (err){
        document.getElementById("result").textContent =
          "âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…";
      }

      cart = [];
      renderCart();
    }
  </script>
</body>
</html>
